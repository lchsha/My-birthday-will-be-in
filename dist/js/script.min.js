"use strict";let intervalId,selectDays=document.querySelector(".select_days"),selectMonths=document.querySelector(".select_months"),selects=document.querySelectorAll(".select"),dropdowns=document.querySelectorAll(".select__dropdown"),labelDays=document.getElementById("label-days"),labelMonths=document.getElementById("label-months"),arrMonths=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],btn=document.querySelector("[data-btn]");function openSelect({target:e}){if(e.closest(".select")){let t=e.closest(".select"),n=t.querySelector(".select__dropdown");if(t.classList.contains("active"))e.closest("li")&&chooseItem(e),t.classList.remove("active"),n.style.height="0px";else{selects.forEach((e=>e.classList.remove("active"))),t.classList.add("active");let e=parseInt(window.getComputedStyle(n).maxHeight);dropdowns.forEach((e=>e.style.height="0px")),n.style.height=e+"px"}}else selects.forEach((e=>e.classList.remove("active"))),dropdowns.forEach((e=>e.style.height="0px"))}function closeSelects(e){"Escape"===e.key&&(selects.forEach((e=>e.classList.remove("active"))),dropdowns.forEach((e=>e.style.height="0px")))}function init(){let e=getArrDays(0);selects.forEach((t=>{t.closest(".select_days")?(fillSelects(e,t),labelDays.innerHTML=e[0]):t.closest(".select_months")&&(fillSelects(arrMonths,t),labelMonths.innerHTML=arrMonths[0])}))}function chooseItem(e){if(isNaN(+e.innerHTML)){updateQuantityDays(arrMonths.indexOf(e.innerHTML)),labelMonths.innerHTML=e.innerHTML}else labelDays.innerHTML=e.innerHTML}function updateQuantityDays(e){let t=selectDays.querySelector(".select__items"),n=getArrDays(e);createOptions(n,t),+labelDays.innerHTML>n.length&&(labelDays.innerHTML=1)}function fillSelects(e,t){if(!t)return;createOptions(e,t.querySelector(".select__items"))}function getArrDays(e){let t=new Date,n=new Date(t.getFullYear(),e+1,0),s=[];for(let e=1;e<=n.getDate();e++)s.push(e);return s}function createOptions(e,t){t.innerHTML="";for(let n=0;n<e.length;n++){let s=document.createElement("li");s.append(e[n]),t.append(s)}}function updateCountdown(){let e=document.getElementById("days"),t=document.getElementById("hours"),n=document.getElementById("minutes"),s=document.getElementById("seconds"),l=document.getElementById("timer-congrat"),o=document.getElementById("timer-body"),a=new Date,i=arrMonths.indexOf(labelMonths.innerHTML),r=+labelDays.innerHTML,c=new Date(a.getFullYear(),i,r),d=Math.ceil((c.getTime()-Date.now())/1e3/60/60/24);d<0&&(c=new Date(a.getFullYear()+1,i,r)),l.classList.contains("show")&&o.classList.contains("hide")&&(l.classList.remove("show"),o.classList.remove("hide")),0===d?(l.classList.add("show"),o.classList.add("hide")):(clearInterval(intervalId),getCountdownNums(c,e,t,n,s),intervalId=setInterval((()=>{getCountdownNums(c,e,t,n,s)}),1e3))}function getCountdownNums(e,t,n,s,l){let o=t.nextElementSibling,a=n.nextElementSibling,i=s.nextElementSibling,r=l.nextElementSibling,c=e.getTime()-Date.now(),d=Math.floor(c/1e3/60/60/24),u=Math.floor(c/1e3/60/60%24),m=Math.floor(c/1e3/60%60),h=Math.floor(c/1e3%60);t.innerHTML=addZero(d),n.innerHTML=addZero(u),s.innerHTML=addZero(m),l.innerHTML=addZero(h),o.innerHTML=getRightNameDate(d,["день","дня","дней"]),a.innerHTML=getRightNameDate(u,["час","часа","часов"]),i.innerHTML=getRightNameDate(m,["минута","минуты","минут"]),r.innerHTML=getRightNameDate(h,["секунда","секунды","секунд"])}function addZero(e){return e<10?"0"+e:e}function getRightNameDate(e,t){let n=e%100,s=e%10;return t[n>4&&n<20?2:s>1&&s<5?1:1===s?0:2]}init(),document.addEventListener("click",openSelect),document.addEventListener("keydown",closeSelects),btn.addEventListener("click",updateCountdown);